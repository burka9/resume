---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { getAllProjects } from '../lib/db';

const allProjects = await getAllProjects();
const projects = allProjects.slice(0, 3);
---

<BaseLayout title="Home">
  <!-- Hero Section -->
  <section class="section pt-32">
    <div class="container">
      <div class="flex flex-col-reverse lg:flex-row items-center gap-12">
        <div class="flex-1">
          <p class="text-accent font-medium mb-4 animate-fade-in">Hi, I'm</p>
          <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6 animate-fade-in stagger-1">
            Biruk Ephrem
          </h1>
          <p class="text-xl sm:text-2xl text-text-secondary mb-8 animate-fade-in stagger-2">
            DevOps Engineer & Full Stack Developer building scalable applications and cloud infrastructure.
          </p>
          <div class="flex flex-wrap gap-4 animate-fade-in stagger-3">
            <a href="/projects" class="btn btn-primary">
              View Projects
            </a>
            <a href="/contact" class="btn btn-secondary">
              Get in Touch
            </a>
          </div>
        </div>

        <!-- Profile Photo -->
        <div class="flex-shrink-0 animate-fade-in">
          <div class="relative">
            <div class="w-48 h-48 md:w-64 md:h-64 rounded-full overflow-hidden border-4 border-accent shadow-2xl shadow-accent/20">
              <!-- Replace with your photo: /public/photo.jpg -->
              <img
                src="/photo.jpg"
                alt="Biruk Ephrem"
                class="w-full h-full object-cover"
                onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
              />
              <!-- Fallback if no photo -->
              <div class="w-full h-full bg-surface flex items-center justify-center text-6xl font-bold text-accent" style="display: none;">
                BE
              </div>
            </div>
            <!-- Decorative ring -->
            <div class="absolute -inset-2 rounded-full border-2 border-accent/30 animate-pulse"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Projects -->
  <section class="section">
    <div class="container">
      <div class="flex items-center justify-between mb-8">
        <h2 class="section-title mb-0">Featured Projects</h2>
        <a href="/projects" class="text-accent hover:underline text-sm font-medium">
          View all &rarr;
        </a>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {projects.map(project => (
          <ProjectCard project={project} />
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section">
    <div class="container">
      <div class="card text-center py-12">
        <h2 class="text-2xl md:text-3xl font-bold mb-4">
          Interested in working together?
        </h2>
        <p class="text-text-secondary mb-6 max-w-md mx-auto">
          I'm always open to discussing new projects and opportunities.
        </p>
        <a href="/contact" class="btn btn-primary">
          Let's Talk
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
